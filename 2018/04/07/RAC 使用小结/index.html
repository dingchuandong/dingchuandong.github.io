<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="iOS," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="RAC常见用法- RACSignal- RACSubject- RACSequence- RACMulticastConnection- RACCommand- RAC常用宏- RAC-bind- RAC-过滤- RAC-映射- RAC-组合- RACSignal一.核心1.信号类2.作用：只要有数据改变就会把数据包装成信号传递出去3.只要有数据改变就会有信号发出4.数据发出，并不是信号类发出，信">
<meta property="og:type" content="article">
<meta property="og:title" content="RAC常见用法">
<meta property="og:url" content="http://yoursite.com/2018/04/07/RAC 使用小结/index.html">
<meta property="og:site_name" content="Snow Memory">
<meta property="og:description" content="RAC常见用法- RACSignal- RACSubject- RACSequence- RACMulticastConnection- RACCommand- RAC常用宏- RAC-bind- RAC-过滤- RAC-映射- RAC-组合- RACSignal一.核心1.信号类2.作用：只要有数据改变就会把数据包装成信号传递出去3.只要有数据改变就会有信号发出4.数据发出，并不是信号类发出，信">
<meta property="og:updated_time" content="2019-02-13T09:53:30.875Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RAC常见用法">
<meta name="twitter:description" content="RAC常见用法- RACSignal- RACSubject- RACSequence- RACMulticastConnection- RACCommand- RAC常用宏- RAC-bind- RAC-过滤- RAC-映射- RAC-组合- RACSignal一.核心1.信号类2.作用：只要有数据改变就会把数据包装成信号传递出去3.只要有数据改变就会有信号发出4.数据发出，并不是信号类发出，信">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2018/04/07/RAC 使用小结/"/>

  <title> RAC常见用法 | Snow Memory </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta custom-logo">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Snow Memory</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">雪忆, 如雪般单纯, 冷静思考.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-积累 " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                RAC常见用法
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-04-07T12:25:19+08:00" content="Apr 7 2018">
              Apr 7 2018
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="RAC常见用法"><a href="#RAC常见用法" class="headerlink" title="RAC常见用法"></a>RAC常见用法</h1><h2 id="RACSignal"><a href="#RACSignal" class="headerlink" title="- RACSignal"></a>- RACSignal</h2><h2 id="RACSubject"><a href="#RACSubject" class="headerlink" title="- RACSubject"></a>- RACSubject</h2><h2 id="RACSequence"><a href="#RACSequence" class="headerlink" title="- RACSequence"></a>- RACSequence</h2><h2 id="RACMulticastConnection"><a href="#RACMulticastConnection" class="headerlink" title="- RACMulticastConnection"></a>- RACMulticastConnection</h2><h2 id="RACCommand"><a href="#RACCommand" class="headerlink" title="- RACCommand"></a>- RACCommand</h2><h2 id="RAC常用宏"><a href="#RAC常用宏" class="headerlink" title="- RAC常用宏"></a>- RAC常用宏</h2><h2 id="RAC-bind"><a href="#RAC-bind" class="headerlink" title="- RAC-bind"></a>- RAC-bind</h2><h2 id="RAC-过滤"><a href="#RAC-过滤" class="headerlink" title="- RAC-过滤"></a>- RAC-过滤</h2><h2 id="RAC-映射"><a href="#RAC-映射" class="headerlink" title="- RAC-映射"></a>- RAC-映射</h2><h2 id="RAC-组合"><a href="#RAC-组合" class="headerlink" title="- RAC-组合"></a>- RAC-组合</h2><h1 id="RACSignal-1"><a href="#RACSignal-1" class="headerlink" title="- RACSignal"></a>- RACSignal</h1><h1 id="一-核心"><a href="#一-核心" class="headerlink" title="一.核心"></a>一.核心</h1><h2 id="1-信号类"><a href="#1-信号类" class="headerlink" title="1.信号类"></a>1.信号类</h2><h2 id="2-作用：只要有数据改变就会把数据包装成信号传递出去"><a href="#2-作用：只要有数据改变就会把数据包装成信号传递出去" class="headerlink" title="2.作用：只要有数据改变就会把数据包装成信号传递出去"></a>2.作用：只要有数据改变就会把数据包装成信号传递出去</h2><h2 id="3-只要有数据改变就会有信号发出"><a href="#3-只要有数据改变就会有信号发出" class="headerlink" title="3.只要有数据改变就会有信号发出"></a>3.只要有数据改变就会有信号发出</h2><h2 id="4-数据发出，并不是信号类发出，信号类不能发送数据"><a href="#4-数据发出，并不是信号类发出，信号类不能发送数据" class="headerlink" title="4.数据发出，并不是信号类发出，信号类不能发送数据"></a>4.数据发出，并不是信号类发出，信号类不能发送数据</h2><h1 id="二-使用"><a href="#二-使用" class="headerlink" title="二.使用"></a>二.使用</h1><h2 id="1-创建信号"><a href="#1-创建信号" class="headerlink" title="1.创建信号"></a>1.创建信号</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// 1.创建信号</div><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">// 3.发送信号</div><div class="line">[subscriber sendNext:@&quot;ws&quot;];</div><div class="line">// 4.取消信号，如果信号想要被取消，就必须返回一个RACDisposable</div><div class="line">// 信号什么时候被取消：1.自动取消，当一个信号的订阅者被销毁的时候机会自动取消订阅，2.手动取消，</div><div class="line">//block什么时候调用：一旦一个信号被取消订阅就会调用</div><div class="line">//block作用：当信号被取消时用于清空一些资源</div><div class="line">return [RACDisposable disposableWithBlock:^&#123;</div><div class="line">NSLog(@&quot;取消订阅&quot;);</div><div class="line">&#125;];</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h2 id="2-订阅信号-才能激活信号"><a href="#2-订阅信号-才能激活信号" class="headerlink" title="2.订阅信号(才能激活信号)"></a>2.订阅信号(才能激活信号)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// 2. 订阅信号</div><div class="line">//subscribeNext</div><div class="line">// 把nextBlock保存到订阅者里面</div><div class="line">// 只要订阅信号就会返回一个取消订阅信号的类</div><div class="line">RACDisposable *disposable = [signal subscribeNext:^(id x) &#123;</div><div class="line">// block的调用时刻：只要信号内部发出数据就会调用这个block</div><div class="line">NSLog(@&quot;======%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 取消订阅</div><div class="line">[disposable dispose]</div></pre></td></tr></table></figure>
<h3 id="RACSignal底层实现"><a href="#RACSignal底层实现" class="headerlink" title="RACSignal底层实现 :"></a>RACSignal底层实现 :</h3><h4 id="1、创建信号，首先把didSubscribe保存到信号中，还不会触发"><a href="#1、创建信号，首先把didSubscribe保存到信号中，还不会触发" class="headerlink" title="1、创建信号，首先把didSubscribe保存到信号中，还不会触发."></a>1、创建信号，首先把didSubscribe保存到信号中，还不会触发.</h4><h4 id="2、当信号被订阅，也就是调用signal的subscribrNext：nextBlock，-subscribeNext内部会创建订阅者subscriber，并把nextBlock保存到subscriber中，subscribNext内部会调用signal的didSubscribe"><a href="#2、当信号被订阅，也就是调用signal的subscribrNext：nextBlock，-subscribeNext内部会创建订阅者subscriber，并把nextBlock保存到subscriber中，subscribNext内部会调用signal的didSubscribe" class="headerlink" title="2、当信号被订阅，也就是调用signal的subscribrNext：nextBlock， subscribeNext内部会创建订阅者subscriber，并把nextBlock保存到subscriber中，subscribNext内部会调用signal的didSubscribe"></a>2、当信号被订阅，也就是调用signal的subscribrNext：nextBlock， subscribeNext内部会创建订阅者subscriber，并把nextBlock保存到subscriber中，subscribNext内部会调用signal的didSubscribe</h4><h4 id="3、signal的didsubcribe中调用【subscriber-sendNext：-”发送数据”】，sendNext底层其实就是执行subscriber的nextBlock。"><a href="#3、signal的didsubcribe中调用【subscriber-sendNext：-”发送数据”】，sendNext底层其实就是执行subscriber的nextBlock。" class="headerlink" title="3、signal的didsubcribe中调用【subscriber sendNext：@”发送数据”】，sendNext底层其实就是执行subscriber的nextBlock。"></a>3、signal的didsubcribe中调用【subscriber sendNext：@”发送数据”】，sendNext底层其实就是执行subscriber的nextBlock。</h4><h1 id="RACSubject（热信号）"><a href="#RACSubject（热信号）" class="headerlink" title="- RACSubject（热信号）"></a>- RACSubject（热信号）</h1><h2 id="RACSubject继承于RACSignal遵守了RACSubscriber协议可以完全用RACSubject代替代理-通知-与-RACSignal-以及-RACSequence-有着众多的类簇不同，RACSubject-在整个工程中并没有多少子类；不过，在大多数情况下，我们也只会使用-RACSubject-自己或者-RACReplaySubject-是一个可以『手动』控制的信号"><a href="#RACSubject继承于RACSignal遵守了RACSubscriber协议可以完全用RACSubject代替代理-通知-与-RACSignal-以及-RACSequence-有着众多的类簇不同，RACSubject-在整个工程中并没有多少子类；不过，在大多数情况下，我们也只会使用-RACSubject-自己或者-RACReplaySubject-是一个可以『手动』控制的信号" class="headerlink" title="RACSubject继承于RACSignal遵守了RACSubscriber协议可以完全用RACSubject代替代理 /通知,与 RACSignal 以及 RACSequence 有着众多的类簇不同，RACSubject 在整个工程中并没有多少子类；不过，在大多数情况下，我们也只会使用 RACSubject 自己或者 RACReplaySubject,是一个可以『手动』控制的信号"></a>RACSubject继承于RACSignal遵守了RACSubscriber协议可以完全用RACSubject代替代理 /通知,与 RACSignal 以及 RACSequence 有着众多的类簇不同，RACSubject 在整个工程中并没有多少子类；不过，在大多数情况下，我们也只会使用 RACSubject 自己或者 RACReplaySubject,是一个可以『手动』控制的信号</h2><h3 id="相比于-RACSignal-丰富的头文件-，RACSubject对外的接口并没有提供太多的方法："><a href="#相比于-RACSignal-丰富的头文件-，RACSubject对外的接口并没有提供太多的方法：" class="headerlink" title="相比于 RACSignal 丰富的头文件 ，RACSubject对外的接口并没有提供太多的方法："></a>相比于 RACSignal 丰富的头文件 ，RACSubject对外的接口并没有提供太多的方法：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@interface RACSubject : RACSignal &lt;RACSubscriber&gt;</div><div class="line">+ (instancetype)subject;</div><div class="line">@end</div></pre></td></tr></table></figure>
<h3 id="唯一提供的接口就是用于返回一个新实例的-subject-方法；除此之外，在笔者看来它与-RACSignal-最大的不同就是：RACSubject-实现了-RACSubscriber-协议，也就是下面的这些方法："><a href="#唯一提供的接口就是用于返回一个新实例的-subject-方法；除此之外，在笔者看来它与-RACSignal-最大的不同就是：RACSubject-实现了-RACSubscriber-协议，也就是下面的这些方法：" class="headerlink" title="唯一提供的接口就是用于返回一个新实例的 +subject 方法；除此之外，在笔者看来它与 RACSignal 最大的不同就是：RACSubject 实现了 RACSubscriber 协议，也就是下面的这些方法："></a>唯一提供的接口就是用于返回一个新实例的 +subject 方法；除此之外，在笔者看来它与 RACSignal 最大的不同就是：RACSubject 实现了 RACSubscriber 协议，也就是下面的这些方法：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@protocol RACSubscriber &lt;NSObject&gt;</div><div class="line">@required</div><div class="line">- (void)sendNext:(nullable id)value;</div><div class="line">- (void)sendError:(nullable NSError *)error;</div><div class="line">- (void)sendCompleted;</div><div class="line">- (void)didSubscribeWithDisposable:(RACCompoundDisposable *)disposable;</div><div class="line">@end</div></pre></td></tr></table></figure>
<h3 id="我们并不能在一个-RACSignal-对象上执行这些方法，只能在创建信号的-block-里面向遵循-RACSubscriber-协议的对象发送新的值或者错误，这也是-RACSubject-和父类最大的不同：在-RACSubject-实例初始化之后，也可以通过这个实例向所有的订阅者发送消息。"><a href="#我们并不能在一个-RACSignal-对象上执行这些方法，只能在创建信号的-block-里面向遵循-RACSubscriber-协议的对象发送新的值或者错误，这也是-RACSubject-和父类最大的不同：在-RACSubject-实例初始化之后，也可以通过这个实例向所有的订阅者发送消息。" class="headerlink" title="我们并不能在一个 RACSignal 对象上执行这些方法，只能在创建信号的 block 里面向遵循 RACSubscriber 协议的对象发送新的值或者错误，这也是 RACSubject 和父类最大的不同：在 RACSubject 实例初始化之后，也可以通过这个实例向所有的订阅者发送消息。"></a>我们并不能在一个 RACSignal 对象上执行这些方法，只能在创建信号的 block 里面向遵循 RACSubscriber 协议的对象发送新的值或者错误，这也是 RACSubject 和父类最大的不同：在 RACSubject 实例初始化之后，也可以通过这个实例向所有的订阅者发送消息。</h3><h2 id="1-创建信号-跟RACSignal不一样，创建信号时没有block。"><a href="#1-创建信号-跟RACSignal不一样，创建信号时没有block。" class="headerlink" title="1.创建信号 跟RACSignal不一样，创建信号时没有block。"></a>1.创建信号 跟RACSignal不一样，创建信号时没有block。</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RACSubject *subject = [RACSubject subject];</div></pre></td></tr></table></figure>
<h2 id="2-订阅信号-调用subscribeNext订阅信号，只是把订阅者保存起来，并且订阅者的nextBlock已经赋值了"><a href="#2-订阅信号-调用subscribeNext订阅信号，只是把订阅者保存起来，并且订阅者的nextBlock已经赋值了" class="headerlink" title="2.订阅信号(调用subscribeNext订阅信号，只是把订阅者保存起来，并且订阅者的nextBlock已经赋值了)"></a>2.订阅信号(调用subscribeNext订阅信号，只是把订阅者保存起来，并且订阅者的nextBlock已经赋值了)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[subject subscribeNext:^(id x) &#123;</div><div class="line">// block:当有数据发出的时候就会调用</div><div class="line">// block:处理数据</div><div class="line">NSLog(@&quot;%@&quot;,x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h2 id="3-发送信号-调用subscribeNext订阅信号，只是把订阅者保存起来，并且订阅者的nextBlock已经赋值了"><a href="#3-发送信号-调用subscribeNext订阅信号，只是把订阅者保存起来，并且订阅者的nextBlock已经赋值了" class="headerlink" title="3.发送信号(调用subscribeNext订阅信号，只是把订阅者保存起来，并且订阅者的nextBlock已经赋值了)"></a>3.发送信号(调用subscribeNext订阅信号，只是把订阅者保存起来，并且订阅者的nextBlock已经赋值了)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[subject sendNext:value];</div></pre></td></tr></table></figure>
<h2 id="注意-RACSubject-在-RACSignal-对象之上进行了简单的修改，将原有的冷信号改造成了热信号，将不可变变成了可变。"><a href="#注意-RACSubject-在-RACSignal-对象之上进行了简单的修改，将原有的冷信号改造成了热信号，将不可变变成了可变。" class="headerlink" title="注意 RACSubject 在 RACSignal 对象之上进行了简单的修改，将原有的冷信号改造成了热信号，将不可变变成了可变。"></a>注意 RACSubject 在 RACSignal 对象之上进行了简单的修改，将原有的冷信号改造成了热信号，将不可变变成了可变。</h2><h2 id="RACBehaviorSubject与RACReplaySubject"><a href="#RACBehaviorSubject与RACReplaySubject" class="headerlink" title="RACBehaviorSubject与RACReplaySubject"></a>RACBehaviorSubject与RACReplaySubject</h2><h3 id="RACBehaviorSubject和RACReplaySubject是RACSubject的两个子类，前者在订阅时会向订阅者发送最新的消息，后者在订阅之后可以重新发送之前的所有消息序列。"><a href="#RACBehaviorSubject和RACReplaySubject是RACSubject的两个子类，前者在订阅时会向订阅者发送最新的消息，后者在订阅之后可以重新发送之前的所有消息序列。" class="headerlink" title="RACBehaviorSubject和RACReplaySubject是RACSubject的两个子类，前者在订阅时会向订阅者发送最新的消息，后者在订阅之后可以重新发送之前的所有消息序列。"></a>RACBehaviorSubject和RACReplaySubject是RACSubject的两个子类，前者在订阅时会向订阅者发送最新的消息，后者在订阅之后可以重新发送之前的所有消息序列。</h3><h3 id="先来介绍两者中实现较简单的RACBehaviorSubject，它在内部会保存一个currentValue-对象，也就是最后一次发送的消息："><a href="#先来介绍两者中实现较简单的RACBehaviorSubject，它在内部会保存一个currentValue-对象，也就是最后一次发送的消息：" class="headerlink" title="先来介绍两者中实现较简单的RACBehaviorSubject，它在内部会保存一个currentValue 对象，也就是最后一次发送的消息："></a>先来介绍两者中实现较简单的RACBehaviorSubject，它在内部会保存一个currentValue 对象，也就是最后一次发送的消息：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@interface RACBehaviorSubject ()</div><div class="line">@property (nonatomic, strong) id currentValue;</div><div class="line">@end</div></pre></td></tr></table></figure>
<h4 id="在每次执行-sendNext-时，都会对-RACBehaviorSubject-中保存的-currentValue进行更新，并使用父类的-sendNext-方法，向所有的订阅者发送最新的消息："><a href="#在每次执行-sendNext-时，都会对-RACBehaviorSubject-中保存的-currentValue进行更新，并使用父类的-sendNext-方法，向所有的订阅者发送最新的消息：" class="headerlink" title="在每次执行-sendNext:时，都会对 RACBehaviorSubject 中保存的 currentValue进行更新，并使用父类的 -sendNext:方法，向所有的订阅者发送最新的消息："></a>在每次执行<code>-sendNext:</code>时，都会对 <code>RACBehaviorSubject</code> 中保存的 <code>currentValue</code>进行更新，并使用父类的 <code>-sendNext:</code>方法，向所有的订阅者发送最新的消息：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (void)sendNext:(id)value &#123;</div><div class="line">@synchronized (self) &#123;</div><div class="line">self.currentValue = value;</div><div class="line">[super sendNext:value];</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="RACBehaviorSubject最重要的特性就是在订阅时，向最新的订阅者发送之前的消息，这是通过覆写-subscribe-方法实现的。在调用子类的-subscribe-方法之后，会在subscriber对象上执行-sendNext-方法："><a href="#RACBehaviorSubject最重要的特性就是在订阅时，向最新的订阅者发送之前的消息，这是通过覆写-subscribe-方法实现的。在调用子类的-subscribe-方法之后，会在subscriber对象上执行-sendNext-方法：" class="headerlink" title="RACBehaviorSubject最重要的特性就是在订阅时，向最新的订阅者发送之前的消息，这是通过覆写-subscribe:方法实现的。在调用子类的-subscribe:方法之后，会在subscriber对象上执行-sendNext: 方法："></a><code>RACBehaviorSubject</code>最重要的特性就是在订阅时，向最新的订阅者发送之前的消息，这是通过覆写<code>-subscribe:</code>方法实现的。在调用子类的<code>-subscribe:</code>方法之后，会在<code>subscriber</code>对象上执行<code>-sendNext:</code> 方法：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">- (RACDisposable *)subscribe:(id&lt;RACSubscriber&gt;)subscriber &#123;</div><div class="line">RACDisposable *subscriptionDisposable = [super subscribe:subscriber];</div><div class="line"></div><div class="line">RACDisposable *schedulingDisposable = [RACScheduler.subscriptionScheduler schedule:^&#123;</div><div class="line">@synchronized (self) &#123;</div><div class="line">[subscriber sendNext:self.currentValue];</div><div class="line">&#125;</div><div class="line">&#125;];</div><div class="line"></div><div class="line">return [RACDisposable disposableWithBlock:^&#123;</div><div class="line">[subscriptionDisposable dispose];</div><div class="line">[schedulingDisposable dispose];</div><div class="line">&#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="RACReplaySubject相当于一个自带buffer-的RACBehaviorSubject，它可以在每次有新的订阅者订阅之后发送之前的全部消息。"><a href="#RACReplaySubject相当于一个自带buffer-的RACBehaviorSubject，它可以在每次有新的订阅者订阅之后发送之前的全部消息。" class="headerlink" title="RACReplaySubject相当于一个自带buffer 的RACBehaviorSubject，它可以在每次有新的订阅者订阅之后发送之前的全部消息。"></a>RACReplaySubject相当于一个自带buffer 的RACBehaviorSubject，它可以在每次有新的订阅者订阅之后发送之前的全部消息。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">@interface RACReplaySubject ()</div><div class="line">@property (nonatomic,assign,readonly)NSUInteger capacity;</div><div class="line">@property (nonatomic, strong,readonly) NSMutableArray*valuesReceived;</div><div class="line">@end</div></pre></td></tr></table></figure>
<h2 id="RACSequence-1"><a href="#RACSequence-1" class="headerlink" title="RACSequence"></a>RACSequence</h2><h3 id="高效的遍历数组和字典"><a href="#高效的遍历数组和字典" class="headerlink" title="高效的遍历数组和字典"></a>高效的遍历数组和字典</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">NSArray *dictArr = [[NSArray alloc] initWithObjects:@&quot;1&quot;,@&quot;2&quot;,@&quot;3&quot;,@&quot;4&quot;,@&quot;5&quot;,@&quot;6&quot;, nil];</div><div class="line">[dictArr.rac_sequence.signal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125; error:^(NSError *error) &#123;</div><div class="line">NSLog(@&quot;===error===&quot;);</div><div class="line">&#125; completed:^&#123;</div><div class="line">NSLog(@&quot;ok---完毕&quot;);</div><div class="line">&#125;];</div><div class="line"></div><div class="line">//也可以使用宏</div><div class="line">NSDictionary *dict = @&#123;@&quot;key&quot;:@1, @&quot;key2&quot;:@2&#125;;</div><div class="line">[dict.rac_sequence.signal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">NSString *key = x[0];</div><div class="line">NSString *value = x[1];</div><div class="line">// RACTupleUnpack宏：专门用来解析元组</div><div class="line">// RACTupleUnpack 等会右边：需要解析的元组 宏的参数，填解析的什么样数据</div><div class="line">// 元组里面有几个值，宏的参数就必须填几个</div><div class="line">// RACTupleUnpack(NSString *key, NSString *value) = x;</div><div class="line">NSLog(@&quot;%@ %@&quot;, key, value);</div><div class="line">&#125; error:^(NSError *error) &#123;</div><div class="line">NSLog(@&quot;===error&quot;);</div><div class="line">&#125; completed:^&#123;</div><div class="line">NSLog(@&quot;-----ok---完毕&quot;);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h2 id="RACMulticastConnection-1"><a href="#RACMulticastConnection-1" class="headerlink" title="RACMulticastConnection"></a>RACMulticastConnection</h2><h3 id="当有多个订阅者，但是我们只想发送一个信号的时候怎么办？这时我们就可以用RACMulticastConnection，来实现。代码示例如下"><a href="#当有多个订阅者，但是我们只想发送一个信号的时候怎么办？这时我们就可以用RACMulticastConnection，来实现。代码示例如下" class="headerlink" title="当有多个订阅者，但是我们只想发送一个信号的时候怎么办？这时我们就可以用RACMulticastConnection，来实现。代码示例如下:"></a>当有多个订阅者，但是我们只想发送一个信号的时候怎么办？这时我们就可以用RACMulticastConnection，来实现。代码示例如下:</h3><h4 id="1-普通写法"><a href="#1-普通写法" class="headerlink" title="1.普通写法:"></a>1.普通写法:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// 这样的缺点是：每订阅一次信号就得重新创建并发送请求，这样很不友好</div><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">// didSubscribeblock中的代码都统称为副作用。</div><div class="line">// 发送请求---比如afn</div><div class="line">NSLog(@&quot;发送请求啦&quot;);</div><div class="line">// 发送信号</div><div class="line">[subscriber sendNext:@&quot;ws&quot;];</div><div class="line">return nil;</div><div class="line">&#125;];</div><div class="line">[signal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">[signal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">[signal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="比较好的写法"><a href="#比较好的写法" class="headerlink" title="比较好的写法:"></a>比较好的写法:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">// 使用RACMulticastConnection，无论有多少个订阅者，无论订阅多少次，我只发送一个。</div><div class="line">// 1.发送请求，用一个信号内包装，不管有多少个订阅者，只想发一次请求</div><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">// 发送请求</div><div class="line">NSLog(@&quot;发送请求啦&quot;);</div><div class="line">// 发送信号</div><div class="line">[subscriber sendNext:@&quot;ws&quot;];</div><div class="line">return nil;</div><div class="line">&#125;];</div><div class="line">//2. 创建连接类</div><div class="line">RACMulticastConnection *connection = [signal publish];</div><div class="line">[connection.signal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">[connection.signal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">[connection.signal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">//3. 连接。只有连接了才会把信号源变为热信号</div><div class="line">[connection connect];</div></pre></td></tr></table></figure>
<h4 id="大概原理"><a href="#大概原理" class="headerlink" title="大概原理 :"></a>大概原理 :</h4><ul>
<li>1.创建connect，connect.sourceSignal -&gt; RACSignal(原始信号)  connect.signal -&gt; RACSubject     </li>
<li>2.订阅connect.signal，会调用RACSubject的subscribeNext，创建订阅者，而且把订阅者保存起来，不会执行block。     </li>
<li>3.[connect connect]内部会订阅RACSignal(原始信号)，并且订阅者是RACSubject     </li>
<li>3.1.订阅原始信号，就会调用原始信号中的didSubscribe     </li>
<li>3.2 didSubscribe，拿到订阅者调用sendNext，其实是调用RACSubject的sendNext     </li>
<li>4.RACSubject的sendNext,会遍历RACSubject所有订阅者发送信号。    </li>
<li>4.1 因为刚刚第二步，都是在订阅RACSubject，因此会拿到第二步所有的订阅者，调用他们的nextBlock</li>
<li><h3 id="RACCommand-1"><a href="#RACCommand-1" class="headerlink" title="RACCommand"></a>RACCommand</h3><h4 id="RACCommand-RAC中用于处理事件的类，可以把事件如何处理，事件中的数据如何传递，包装到这个类中，他可以很方便的监控事件的执行过程，比如看事件有没有执行完毕"><a href="#RACCommand-RAC中用于处理事件的类，可以把事件如何处理，事件中的数据如何传递，包装到这个类中，他可以很方便的监控事件的执行过程，比如看事件有没有执行完毕" class="headerlink" title="RACCommand:RAC中用于处理事件的类，可以把事件如何处理，事件中的数据如何传递，包装到这个类中，他可以很方便的监控事件的执行过程，比如看事件有没有执行完毕"></a>RACCommand:RAC中用于处理事件的类，可以把事件如何处理，事件中的数据如何传递，包装到这个类中，他可以很方便的监控事件的执行过程，比如看事件有没有执行完毕</h4><h4 id="使用场景-监听按钮点击，网络请求"><a href="#使用场景-监听按钮点击，网络请求" class="headerlink" title="使用场景:监听按钮点击，网络请求"></a>使用场景:监听按钮点击，网络请求</h4></li>
<li><p>普通做法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">// RACCommand: 处理事件</div><div class="line">// 不能返回空的信号</div><div class="line">// 1.创建命令</div><div class="line">RACCommand *command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) &#123;</div><div class="line">//block调用，执行命令的时候就会调用</div><div class="line">NSLog(@&quot;%@&quot;,input);</div><div class="line">// input 为执行命令传进来的参数</div><div class="line">// 这里的返回值不允许为nil</div><div class="line">return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">[subscriber sendNext:@&quot;执行命令产生的数据&quot;];</div><div class="line">return nil;</div><div class="line">&#125;];</div><div class="line">&#125;];</div><div class="line"></div><div class="line">// 如何拿到执行命令中产生的数据呢？</div><div class="line">// 订阅命令内部的信号</div><div class="line">// ** 方式一：直接订阅执行命令返回的信号</div><div class="line">// 2.执行命令</div><div class="line">RACSignal *signal =[command execute:@2];</div><div class="line">// 这里其实用到的是replaySubject 可以先发送命令再订阅</div><div class="line">// 在这里就可以订阅信号了</div><div class="line">[signal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;,x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
</li>
<li><p>一般做法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">// 1.创建命令</div><div class="line">RACCommand *command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) &#123;</div><div class="line">//block调用，执行命令的时候就会调用</div><div class="line">NSLog(@&quot;%@&quot;,input); // input 为执行命令传进来的参数</div><div class="line">// 这里的返回值不允许为nil</div><div class="line">return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">[subscriber sendNext:@&quot;执行命令产生的数据&quot;];</div><div class="line">return nil;</div><div class="line">&#125;];</div><div class="line">&#125;];</div><div class="line"></div><div class="line">// 订阅信号</div><div class="line">// 注意：这里必须是先订阅才能发送命令</div><div class="line">// executionSignals：信号源，信号中信号，signalofsignals:信号，发送数据就是信号</div><div class="line">[command.executionSignals subscribeNext:^(RACSignal *x) &#123;</div><div class="line">[x subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">//        NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 2.执行命令</div><div class="line">[command execute:@2];</div></pre></td></tr></table></figure>
</li>
<li><p>高级做法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// 1.创建命令</div><div class="line">RACCommand *command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) &#123;</div><div class="line">// block调用：执行命令的时候就会调用</div><div class="line">NSLog(@&quot;%@&quot;, input);</div><div class="line">// 这里的返回值不允许为nil</div><div class="line">return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">[subscriber sendNext:@&quot;发送信号&quot;];</div><div class="line">return nil;</div><div class="line">&#125;];</div><div class="line">&#125;];</div><div class="line"></div><div class="line">// 方式三</div><div class="line">// switchToLatest获取最新发送的信号，只能用于信号中信号。</div><div class="line">[command.executionSignals.switchToLatest subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 2.执行命令</div><div class="line">[command execute:@3];</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// switchToLatest--用于信号中信号</div><div class="line">// 创建信号中信号</div><div class="line">RACSubject *signalofsignals = [RACSubject subject];</div><div class="line">RACSubject *signalA = [RACSubject subject];</div><div class="line">// 订阅信号</div><div class="line">//    [signalofsignals subscribeNext:^(RACSignal *x) &#123;</div><div class="line">//        [x subscribeNext:^(id x) &#123;</div><div class="line">//            NSLog(@&quot;%@&quot;, x);</div><div class="line">//        &#125;];</div><div class="line">//    &#125;];</div><div class="line">// switchToLatest: 获取信号中信号发送的最新信号</div><div class="line">[signalofsignals.switchToLatest subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 发送信号</div><div class="line">[signalofsignals sendNext:signalA];</div><div class="line">[signalA sendNext:@4];</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">// 监听事件有没有完成</div><div class="line">//注意：当前命令内部发送数据完成，一定要主动发送完成</div><div class="line">// 1.创建命令</div><div class="line">RACCommand *command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) &#123;</div><div class="line">// block调用：执行命令的时候就会调用</div><div class="line">NSLog(@&quot;%@&quot;, input);</div><div class="line">// 这里的返回值不允许为nil</div><div class="line">return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">// 发送数据</div><div class="line">[subscriber sendNext:@&quot;执行命令产生的数据&quot;];</div><div class="line"></div><div class="line">// *** 发送完成 **</div><div class="line">[subscriber sendCompleted];</div><div class="line">return nil;</div><div class="line">&#125;];</div><div class="line">&#125;];</div><div class="line">// 监听事件有没有完成</div><div class="line">[command.executing subscribeNext:^(id x) &#123;</div><div class="line">if ([x boolValue] == YES) &#123; // 正在执行</div><div class="line">NSLog(@&quot;当前正在执行%@&quot;, x);</div><div class="line">&#125;else &#123;</div><div class="line">// 执行完成/没有执行</div><div class="line">NSLog(@&quot;执行完成/没有执行&quot;);</div><div class="line">&#125;</div><div class="line">&#125;];</div><div class="line"></div><div class="line">// 2.执行命令</div><div class="line">[command execute:@1];</div></pre></td></tr></table></figure>
<h2 id="RAC常用宏-1"><a href="#RAC常用宏-1" class="headerlink" title="RAC常用宏"></a>RAC常用宏</h2><h3 id="RAC有许多强大而方便的宏。如下"><a href="#RAC有许多强大而方便的宏。如下" class="headerlink" title="RAC有许多强大而方便的宏。如下:"></a>RAC有许多强大而方便的宏。如下:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// RAC:把一个对象的某个属性绑定一个信号,只要发出信号,就会把信号的内容给对象的属性赋值</div><div class="line">// 给label的text属性绑定了文本框改变的信号</div><div class="line">RAC(self.label, text) = self.textField.rac_textSignal;</div><div class="line">//    [self.textField.rac_textSignal subscribeNext:^(id x) &#123;</div><div class="line">//        self.label.text = x;</div><div class="line">//    &#125;];</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">*  KVO</div><div class="line">*  RACObserveL:快速的监听某个对象的某个属性改变</div><div class="line">*  返回的是一个信号,对象的某个属性改变的信号</div><div class="line">*/</div><div class="line">[RACObserve(self.view, center) subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//例 textField输入的值赋值给label，监听label文字改变,</div><div class="line">RAC(self.label, text) = self.textField.rac_textSignal;</div><div class="line">[RACObserve(self.label, text) subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;====label的文字变了&quot;);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">*  循环引用问题</div><div class="line">*/</div><div class="line">@weakify(self)</div><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">@strongify(self)</div><div class="line">NSLog(@&quot;%@&quot;,self.view);</div><div class="line">return nil;</div><div class="line">&#125;];</div><div class="line">_signal = signal;</div><div class="line">使用 @weakify(self)和@strongify(self)来避免循环引用</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">* 元祖</div><div class="line">* 快速包装一个元组</div><div class="line">* 把包装的类型放在宏的参数里面,就会自动包装</div><div class="line">*/</div><div class="line">RACTuple *tuple = RACTuplePack(@1,@2,@4);</div><div class="line">// 宏的参数类型要和元祖中元素类型一致， 右边为要解析的元祖。</div><div class="line">RACTupleUnpack_(NSNumber *num1, NSNumber *num2, NSNumber * num3) = tuple;// 4.元祖</div><div class="line">// 快速包装一个元组</div><div class="line">// 把包装的类型放在宏的参数里面,就会自动包装</div><div class="line">NSLog(@&quot;%@ %@ %@&quot;, num1, num2, num3);</div></pre></td></tr></table></figure>
<h2 id="RAC-bind-1"><a href="#RAC-bind-1" class="headerlink" title="RAC-bind"></a>RAC-bind</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">// 1.创建信号</div><div class="line">RACSubject *subject = [RACSubject subject];</div><div class="line">// 2.绑定信号</div><div class="line">RACSignal *bindSignal = [subject bind:^RACStreamBindBlock&#123;</div><div class="line">// block调用时刻：只要绑定信号订阅就会调用。不做什么事情，</div><div class="line">return ^RACSignal *(id value, BOOL *stop)&#123;</div><div class="line">// 一般在这个block中做事 ，发数据的时候会来到这个block。</div><div class="line">// 只要源信号（subject）发送数据，就会调用block</div><div class="line">// block作用：处理源信号内容</div><div class="line">// value:源信号发送的内容，</div><div class="line">value = @3; // 如果在这里把value的值改了，那么订阅绑定信号的值即44行的x就变了</div><div class="line">NSLog(@&quot;接受到源信号的内容：%@&quot;, value);</div><div class="line">//返回信号，不能为nil,如果非要返回空---则empty或 alloc init。</div><div class="line">return [RACReturnSignal return:value]; // 把返回的值包装成信号</div><div class="line">&#125;;</div><div class="line">&#125;];</div><div class="line"></div><div class="line">// 3.订阅绑定信号</div><div class="line">[bindSignal subscribeNext:^(id x) &#123;</div><div class="line"></div><div class="line">NSLog(@&quot;接收到绑定信号处理完的信号:%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 4.发送信号</div><div class="line">[subject sendNext:@&quot;123&quot;];</div></pre></td></tr></table></figure>
<ul>
<li>bind（绑定）的使用思想和Hook的一样—&gt; 都是拦截API从而可以对数据进行操作，而影响返回数据。</li>
<li>发送信号的时候会来到30行的block。在这个block里我们可以对数据进行一些操作，那么35行打印的value和订阅绑定信号后的value就会变了。<h2 id="RAC-过滤-1"><a href="#RAC-过滤-1" class="headerlink" title="RAC-过滤"></a>RAC-过滤</h2><h3 id="有时候我们想要过滤一些信号，这时候我们便可以用RAC的过滤方法。过滤方法有好多种，如下代码，从不同情况下进行了分析。"><a href="#有时候我们想要过滤一些信号，这时候我们便可以用RAC的过滤方法。过滤方法有好多种，如下代码，从不同情况下进行了分析。" class="headerlink" title="有时候我们想要过滤一些信号，这时候我们便可以用RAC的过滤方法。过滤方法有好多种，如下代码，从不同情况下进行了分析。"></a>有时候我们想要过滤一些信号，这时候我们便可以用RAC的过滤方法。过滤方法有好多种，如下代码，从不同情况下进行了分析。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// 跳跃 ： 如下，skip传入2 跳过前面两个值</div><div class="line">// 实际用处： 在实际开发中比如 后台返回的数据前面几个没用，我们想跳跃过去，便可以用skip</div><div class="line">RACSubject *subject = [RACSubject subject];</div><div class="line">[[subject skip:2] subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">[subject sendNext:@1];</div><div class="line">[subject sendNext:@2];</div><div class="line">[subject sendNext:@3];</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//distinctUntilChanged:-- 如果当前的值跟上一次的值一样，就不会被订阅到</div><div class="line">RACSubject *subject = [RACSubject subject];</div><div class="line">[[subject distinctUntilChanged] subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 发送信号</div><div class="line">[subject sendNext:@1];</div><div class="line">[subject sendNext:@2];</div><div class="line">[subject sendNext:@2]; // 不会被订阅</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// take:可以屏蔽一些值,去掉前面几个值---这里take为2 则只拿到前两个值</div><div class="line">RACSubject *subject = [RACSubject subject];</div><div class="line">[[subject take:2] subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 发送信号</div><div class="line">[subject sendNext:@1];</div><div class="line">[subject sendNext:@2];</div><div class="line">[subject sendNext:@3];</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//takeLast:和take的用法一样，不过他取的是最后的几个值，如下，则取的是最后两个值</div><div class="line">//注意点:takeLast 一定要调用sendCompleted，告诉他发送完成了，这样才能取到最后的几个值</div><div class="line">RACSubject *subject = [RACSubject subject];</div><div class="line">[[subject takeLast:2] subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 发送信号</div><div class="line">[subject sendNext:@1];</div><div class="line">[subject sendNext:@2];</div><div class="line">[subject sendNext:@3];</div><div class="line">[subject sendCompleted];</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// takeUntil:---给takeUntil传的是哪个信号，那么当这个信号发送信号或sendCompleted，就不能再接受源信号的内容了。</div><div class="line">RACSubject *subject = [RACSubject subject];</div><div class="line">RACSubject *subject2 = [RACSubject subject];</div><div class="line">[[subject takeUntil:subject2] subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 发送信号</div><div class="line">[subject sendNext:@1];</div><div class="line">[subject sendNext:@2];</div><div class="line">[subject2 sendNext:@3];  // 1</div><div class="line">//    [subject2 sendCompleted]; // 或2</div><div class="line">[subject sendNext:@4];</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">//ignore:忽略一些值</div><div class="line">//ignoreValues:表示忽略所有的值</div><div class="line">// 1.创建信号</div><div class="line">RACSubject *subject = [RACSubject subject];</div><div class="line">// 2.忽略一些值</div><div class="line">RACSignal *ignoreSignal = [subject ignore:@2]; // ignoreValues:表示忽略所有的值</div><div class="line">// 3.订阅信号</div><div class="line">[ignoreSignal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 4.发送数据</div><div class="line">[subject sendNext:@2];</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// 一般和文本框一起用，添加过滤条件</div><div class="line">// 只有当文本框的内容长度大于5，才获取文本框里的内容</div><div class="line">[[self.textField.rac_textSignal filter:^BOOL(id value) &#123;</div><div class="line">// value 源信号的内容</div><div class="line">return [value length] &gt; 5;</div><div class="line">// 返回值 就是过滤条件。只有满足这个条件才能获取到内容</div><div class="line">&#125;] subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h2 id="RAC-映射-1"><a href="#RAC-映射-1" class="headerlink" title="RAC-映射"></a>RAC-映射</h2><h3 id="RAC的映射在实际开发中有什么用呢？比如我们想要拦截服务器返回的数据，给数据拼接特定的东西或想对数据进行操作从而更改返回值，类似于这样的情况下，我们便可以考虑用RAC的映射，实例代码如下"><a href="#RAC的映射在实际开发中有什么用呢？比如我们想要拦截服务器返回的数据，给数据拼接特定的东西或想对数据进行操作从而更改返回值，类似于这样的情况下，我们便可以考虑用RAC的映射，实例代码如下" class="headerlink" title="RAC的映射在实际开发中有什么用呢？比如我们想要拦截服务器返回的数据，给数据拼接特定的东西或想对数据进行操作从而更改返回值，类似于这样的情况下，我们便可以考虑用RAC的映射，实例代码如下"></a>RAC的映射在实际开发中有什么用呢？比如我们想要拦截服务器返回的数据，给数据拼接特定的东西或想对数据进行操作从而更改返回值，类似于这样的情况下，我们便可以考虑用RAC的映射，实例代码如下</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)map &#123;</div><div class="line">// 创建信号</div><div class="line">RACSubject *subject = [RACSubject subject];</div><div class="line">// 绑定信号</div><div class="line">RACSignal *bindSignal = [subject map:^id(id value) &#123;</div><div class="line"></div><div class="line">// 返回的类型就是你需要映射的值</div><div class="line">return [NSString stringWithFormat:@&quot;ws:%@&quot;, value]; //这里将源信号发送的“123” 前面拼接了ws：</div><div class="line">&#125;];</div><div class="line">// 订阅绑定信号</div><div class="line">[bindSignal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 发送信号</div><div class="line">[subject sendNext:@&quot;123&quot;];</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">- (void)flatMap &#123;</div><div class="line">// 创建信号</div><div class="line">RACSubject *subject = [RACSubject subject];</div><div class="line">// 绑定信号</div><div class="line">RACSignal *bindSignal = [subject flattenMap:^RACStream *(id value) &#123;</div><div class="line">// block：只要源信号发送内容就会调用</div><div class="line">// value: 就是源信号发送的内容</div><div class="line">// 返回信号用来包装成修改内容的值</div><div class="line">return [RACReturnSignal return:value];</div><div class="line">&#125;];</div><div class="line"></div><div class="line">// flattenMap中返回的是什么信号，订阅的就是什么信号(那么，x的值等于value的值，如果我们操纵value的值那么x也会随之而变)</div><div class="line">// 订阅信号</div><div class="line">[bindSignal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 发送数据</div><div class="line">[subject sendNext:@&quot;123&quot;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">-(void)flattenMap2&#123;</div><div class="line">// flattenMap 主要用于信号中的信号</div><div class="line">// 创建信号</div><div class="line">RACSubject *signalofSignals = [RACSubject subject];</div><div class="line">RACSubject *signal = [RACSubject subject];</div><div class="line"></div><div class="line">// 订阅信号</div><div class="line">//方式1</div><div class="line">//    [signalofSignals subscribeNext:^(id x) &#123;</div><div class="line">//</div><div class="line">//        [x subscribeNext:^(id x) &#123;</div><div class="line">//            NSLog(@&quot;%@&quot;, x);</div><div class="line">//        &#125;];</div><div class="line">//    &#125;];</div><div class="line">// 方式2</div><div class="line">//    [signalofSignals.switchToLatest  ];</div><div class="line">// 方式3</div><div class="line">//   RACSignal *bignSignal = [signalofSignals flattenMap:^RACStream *(id value) &#123;</div><div class="line">//</div><div class="line">//        //value:就是源信号发送内容</div><div class="line">//        return value;</div><div class="line">//    &#125;];</div><div class="line">//    [bignSignal subscribeNext:^(id x) &#123;</div><div class="line">//        NSLog(@&quot;%@&quot;, x);</div><div class="line">//    &#125;];</div><div class="line">// 方式4--------也是开发中常用的</div><div class="line">[[signalofSignals flattenMap:^RACStream *(id value) &#123;</div><div class="line">return value;</div><div class="line">&#125;] subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 发送信号</div><div class="line">[signalofSignals sendNext:signal];</div><div class="line">[signal sendNext:@&quot;123&quot;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="RAC-组合-1"><a href="#RAC-组合-1" class="headerlink" title="RAC-组合"></a>RAC-组合</h2><h3 id="把多个信号聚合成你想要的信号-比如-当多个输入框都有值的时候按钮才可点击"><a href="#把多个信号聚合成你想要的信号-比如-当多个输入框都有值的时候按钮才可点击" class="headerlink" title="把多个信号聚合成你想要的信号,(比如-当多个输入框都有值的时候按钮才可点击)"></a>把多个信号聚合成你想要的信号,(比如-当多个输入框都有值的时候按钮才可点击)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// 思路--- 就是把输入框输入值的信号都聚合成按钮是否能点击的信号。</div><div class="line">- (void)combineLatest &#123;</div><div class="line">RACSignal *combinSignal = [RACSignal combineLatest:@[self.accountField.rac_textSignal, self.pwdField.rac_textSignal] reduce:^id(NSString *account, NSString *pwd)&#123; //reduce里的参数一定要和combineLatest数组里的一一对应。</div><div class="line">// block: 只要源信号发送内容，就会调用，组合成一个新值。</div><div class="line">NSLog(@&quot;%@ %@&quot;, account, pwd);</div><div class="line">return @(account.length &amp;&amp; pwd.length);</div><div class="line">&#125;];</div><div class="line">//    // 订阅信号</div><div class="line">//    [combinSignal subscribeNext:^(id x) &#123;</div><div class="line">//        self.loginBtn.enabled = [x boolValue];</div><div class="line">//    &#125;];    // ----这样写有些麻烦，可以直接用RAC宏</div><div class="line">RAC(self.loginBtn, enabled) = combinSignal;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">- (void)zipWith &#123;</div><div class="line">//zipWith:把两个信号压缩成一个信号，只有当两个信号同时发出信号内容时，并且把两个信号的内容合并成一个元祖，才会触发压缩流的next事件。</div><div class="line">// 创建信号A</div><div class="line">RACSubject *signalA = [RACSubject subject];</div><div class="line">// 创建信号B</div><div class="line">RACSubject *signalB = [RACSubject subject];</div><div class="line">// 压缩成一个信号</div><div class="line">// **-zipWith-**: 当一个界面多个请求的时候，要等所有请求完成才更新UI</div><div class="line">// 等所有信号都发送内容的时候才会调用</div><div class="line">RACSignal *zipSignal = [signalA zipWith:signalB];</div><div class="line">[zipSignal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x); //所有的值都被包装成了元组</div><div class="line">&#125;];</div><div class="line"></div><div class="line">// 发送信号 交互顺序，元组内元素的顺序不会变，跟发送的顺序无关，而是跟压缩的顺序有关[signalA zipWith:signalB]---先是A后是B</div><div class="line">[signalA sendNext:@1];</div><div class="line">[signalB sendNext:@2];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// 任何一个信号请求完成都会被订阅到</div><div class="line">// merge:多个信号合并成一个信号，任何一个信号有新值就会调用</div><div class="line">- (void)merge&#123;</div><div class="line">// 创建信号A</div><div class="line">RACSubject *signalA = [RACSubject subject];</div><div class="line">// 创建信号B</div><div class="line">RACSubject *signalB = [RACSubject subject];</div><div class="line">//组合信号</div><div class="line">RACSignal *mergeSignal = [signalA merge:signalB];</div><div class="line">// 订阅信号</div><div class="line">[mergeSignal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">// 发送信号---交换位置则数据结果顺序也会交换</div><div class="line">[signalB sendNext:@&quot;下部分&quot;];</div><div class="line">[signalA sendNext:@&quot;上部分&quot;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">// then --- 使用需求：有两部分数据：想让上部分先进行网络请求但是过滤掉数据，然后进行下部分的，拿到下部分数据</div><div class="line">- (void)then &#123;</div><div class="line">// 创建信号A</div><div class="line">RACSignal *signalA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">// 发送请求</div><div class="line">NSLog(@&quot;----发送上部分请求---afn&quot;);</div><div class="line"></div><div class="line">[subscriber sendNext:@&quot;上部分数据&quot;];</div><div class="line">[subscriber sendCompleted]; // 必须要调用sendCompleted方法！</div><div class="line">return nil;</div><div class="line">&#125;];</div><div class="line"></div><div class="line">// 创建信号B，</div><div class="line">RACSignal *signalsB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">// 发送请求</div><div class="line">NSLog(@&quot;--发送下部分请求--afn&quot;);</div><div class="line">[subscriber sendNext:@&quot;下部分数据&quot;];</div><div class="line">return nil;</div><div class="line">&#125;];</div><div class="line">// 创建组合信号</div><div class="line">// then;忽略掉第一个信号的所有值</div><div class="line">RACSignal *thenSignal = [signalA then:^RACSignal *&#123;</div><div class="line">// 返回的信号就是要组合的信号</div><div class="line">return signalsB;</div><div class="line">&#125;];</div><div class="line"></div><div class="line">// 订阅信号</div><div class="line">[thenSignal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;, x);</div><div class="line">&#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">// concat----- 使用需求：有两部分数据：想让上部分先执行，完了之后再让下部分执行（都可获取值）</div><div class="line">- (void)concat &#123;</div><div class="line">// 创建信号A</div><div class="line">RACSignal *signalA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">// 发送请求</div><div class="line">// NSLog(@&quot;----发送上部分请求---afn&quot;);</div><div class="line">[subscriber sendNext:@&quot;上部分数据&quot;];</div><div class="line">[subscriber sendCompleted]; // 必须要调用sendCompleted方法！</div><div class="line">return nil;</div><div class="line">&#125;];</div><div class="line"></div><div class="line">// 创建信号B，</div><div class="line">RACSignal *signalsB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">// 发送请求</div><div class="line">// NSLog(@&quot;--发送下部分请求--afn&quot;);</div><div class="line">[subscriber sendNext:@&quot;下部分数据&quot;];</div><div class="line">return nil;</div><div class="line">&#125;];</div><div class="line"></div><div class="line">// concat:按顺序去链接</div><div class="line">//**-注意-**：concat，第一个信号必须要调用sendCompleted</div><div class="line">// 创建组合信号</div><div class="line">RACSignal *concatSignal = [signalA concat:signalsB];</div><div class="line">// 订阅组合信号</div><div class="line">[concatSignal subscribeNext:^(id x) &#123;</div><div class="line">NSLog(@&quot;%@&quot;,x);</div><div class="line">&#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag">#iOS</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/03/12/NSInvocation/" rel="next" title="NSInvocation">
                <i class="fa fa-chevron-left"></i> NSInvocation
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/04/17/RAC常见用法/" rel="prev" title="RAC常见用法">
                RAC常见用法 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/AliPay.png"
               alt="chuandong ding" />
          <p class="site-author-name" itemprop="name">chuandong ding</p>
          <p class="site-description motion-element" itemprop="description">iOS</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">22</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/dingchuandong" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="twitter" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/2725322503" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://slarker.me/" title="slarker" target="_blank">slarker</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://opsnotes.net/about/" title="大神" target="_blank">大神</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#RAC常见用法"><span class="nav-number">1.</span> <span class="nav-text">RAC常见用法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#RACSignal"><span class="nav-number">1.1.</span> <span class="nav-text">- RACSignal</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RACSubject"><span class="nav-number">1.2.</span> <span class="nav-text">- RACSubject</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RACSequence"><span class="nav-number">1.3.</span> <span class="nav-text">- RACSequence</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RACMulticastConnection"><span class="nav-number">1.4.</span> <span class="nav-text">- RACMulticastConnection</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RACCommand"><span class="nav-number">1.5.</span> <span class="nav-text">- RACCommand</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RAC常用宏"><span class="nav-number">1.6.</span> <span class="nav-text">- RAC常用宏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RAC-bind"><span class="nav-number">1.7.</span> <span class="nav-text">- RAC-bind</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RAC-过滤"><span class="nav-number">1.8.</span> <span class="nav-text">- RAC-过滤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RAC-映射"><span class="nav-number">1.9.</span> <span class="nav-text">- RAC-映射</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RAC-组合"><span class="nav-number">1.10.</span> <span class="nav-text">- RAC-组合</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RACSignal-1"><span class="nav-number">2.</span> <span class="nav-text">- RACSignal</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一-核心"><span class="nav-number">3.</span> <span class="nav-text">一.核心</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-信号类"><span class="nav-number">3.1.</span> <span class="nav-text">1.信号类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-作用：只要有数据改变就会把数据包装成信号传递出去"><span class="nav-number">3.2.</span> <span class="nav-text">2.作用：只要有数据改变就会把数据包装成信号传递出去</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-只要有数据改变就会有信号发出"><span class="nav-number">3.3.</span> <span class="nav-text">3.只要有数据改变就会有信号发出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-数据发出，并不是信号类发出，信号类不能发送数据"><span class="nav-number">3.4.</span> <span class="nav-text">4.数据发出，并不是信号类发出，信号类不能发送数据</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二-使用"><span class="nav-number">4.</span> <span class="nav-text">二.使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-创建信号"><span class="nav-number">4.1.</span> <span class="nav-text">1.创建信号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-订阅信号-才能激活信号"><span class="nav-number">4.2.</span> <span class="nav-text">2.订阅信号(才能激活信号)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#RACSignal底层实现"><span class="nav-number">4.2.1.</span> <span class="nav-text">RACSignal底层实现 :</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、创建信号，首先把didSubscribe保存到信号中，还不会触发"><span class="nav-number">4.2.1.1.</span> <span class="nav-text">1、创建信号，首先把didSubscribe保存到信号中，还不会触发.</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、当信号被订阅，也就是调用signal的subscribrNext：nextBlock，-subscribeNext内部会创建订阅者subscriber，并把nextBlock保存到subscriber中，subscribNext内部会调用signal的didSubscribe"><span class="nav-number">4.2.1.2.</span> <span class="nav-text">2、当信号被订阅，也就是调用signal的subscribrNext：nextBlock， subscribeNext内部会创建订阅者subscriber，并把nextBlock保存到subscriber中，subscribNext内部会调用signal的didSubscribe</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、signal的didsubcribe中调用【subscriber-sendNext：-”发送数据”】，sendNext底层其实就是执行subscriber的nextBlock。"><span class="nav-number">4.2.1.3.</span> <span class="nav-text">3、signal的didsubcribe中调用【subscriber sendNext：@”发送数据”】，sendNext底层其实就是执行subscriber的nextBlock。</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RACSubject（热信号）"><span class="nav-number">5.</span> <span class="nav-text">- RACSubject（热信号）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#RACSubject继承于RACSignal遵守了RACSubscriber协议可以完全用RACSubject代替代理-通知-与-RACSignal-以及-RACSequence-有着众多的类簇不同，RACSubject-在整个工程中并没有多少子类；不过，在大多数情况下，我们也只会使用-RACSubject-自己或者-RACReplaySubject-是一个可以『手动』控制的信号"><span class="nav-number">5.1.</span> <span class="nav-text">RACSubject继承于RACSignal遵守了RACSubscriber协议可以完全用RACSubject代替代理 /通知,与 RACSignal 以及 RACSequence 有着众多的类簇不同，RACSubject 在整个工程中并没有多少子类；不过，在大多数情况下，我们也只会使用 RACSubject 自己或者 RACReplaySubject,是一个可以『手动』控制的信号</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#相比于-RACSignal-丰富的头文件-，RACSubject对外的接口并没有提供太多的方法："><span class="nav-number">5.1.1.</span> <span class="nav-text">相比于 RACSignal 丰富的头文件 ，RACSubject对外的接口并没有提供太多的方法：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#唯一提供的接口就是用于返回一个新实例的-subject-方法；除此之外，在笔者看来它与-RACSignal-最大的不同就是：RACSubject-实现了-RACSubscriber-协议，也就是下面的这些方法："><span class="nav-number">5.1.2.</span> <span class="nav-text">唯一提供的接口就是用于返回一个新实例的 +subject 方法；除此之外，在笔者看来它与 RACSignal 最大的不同就是：RACSubject 实现了 RACSubscriber 协议，也就是下面的这些方法：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#我们并不能在一个-RACSignal-对象上执行这些方法，只能在创建信号的-block-里面向遵循-RACSubscriber-协议的对象发送新的值或者错误，这也是-RACSubject-和父类最大的不同：在-RACSubject-实例初始化之后，也可以通过这个实例向所有的订阅者发送消息。"><span class="nav-number">5.1.3.</span> <span class="nav-text">我们并不能在一个 RACSignal 对象上执行这些方法，只能在创建信号的 block 里面向遵循 RACSubscriber 协议的对象发送新的值或者错误，这也是 RACSubject 和父类最大的不同：在 RACSubject 实例初始化之后，也可以通过这个实例向所有的订阅者发送消息。</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-创建信号-跟RACSignal不一样，创建信号时没有block。"><span class="nav-number">5.2.</span> <span class="nav-text">1.创建信号 跟RACSignal不一样，创建信号时没有block。</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-订阅信号-调用subscribeNext订阅信号，只是把订阅者保存起来，并且订阅者的nextBlock已经赋值了"><span class="nav-number">5.3.</span> <span class="nav-text">2.订阅信号(调用subscribeNext订阅信号，只是把订阅者保存起来，并且订阅者的nextBlock已经赋值了)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-发送信号-调用subscribeNext订阅信号，只是把订阅者保存起来，并且订阅者的nextBlock已经赋值了"><span class="nav-number">5.4.</span> <span class="nav-text">3.发送信号(调用subscribeNext订阅信号，只是把订阅者保存起来，并且订阅者的nextBlock已经赋值了)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注意-RACSubject-在-RACSignal-对象之上进行了简单的修改，将原有的冷信号改造成了热信号，将不可变变成了可变。"><span class="nav-number">5.5.</span> <span class="nav-text">注意 RACSubject 在 RACSignal 对象之上进行了简单的修改，将原有的冷信号改造成了热信号，将不可变变成了可变。</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RACBehaviorSubject与RACReplaySubject"><span class="nav-number">5.6.</span> <span class="nav-text">RACBehaviorSubject与RACReplaySubject</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#RACBehaviorSubject和RACReplaySubject是RACSubject的两个子类，前者在订阅时会向订阅者发送最新的消息，后者在订阅之后可以重新发送之前的所有消息序列。"><span class="nav-number">5.6.1.</span> <span class="nav-text">RACBehaviorSubject和RACReplaySubject是RACSubject的两个子类，前者在订阅时会向订阅者发送最新的消息，后者在订阅之后可以重新发送之前的所有消息序列。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#先来介绍两者中实现较简单的RACBehaviorSubject，它在内部会保存一个currentValue-对象，也就是最后一次发送的消息："><span class="nav-number">5.6.2.</span> <span class="nav-text">先来介绍两者中实现较简单的RACBehaviorSubject，它在内部会保存一个currentValue 对象，也就是最后一次发送的消息：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#在每次执行-sendNext-时，都会对-RACBehaviorSubject-中保存的-currentValue进行更新，并使用父类的-sendNext-方法，向所有的订阅者发送最新的消息："><span class="nav-number">5.6.2.1.</span> <span class="nav-text">在每次执行-sendNext:时，都会对 RACBehaviorSubject 中保存的 currentValue进行更新，并使用父类的 -sendNext:方法，向所有的订阅者发送最新的消息：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#RACBehaviorSubject最重要的特性就是在订阅时，向最新的订阅者发送之前的消息，这是通过覆写-subscribe-方法实现的。在调用子类的-subscribe-方法之后，会在subscriber对象上执行-sendNext-方法："><span class="nav-number">5.6.2.2.</span> <span class="nav-text">RACBehaviorSubject最重要的特性就是在订阅时，向最新的订阅者发送之前的消息，这是通过覆写-subscribe:方法实现的。在调用子类的-subscribe:方法之后，会在subscriber对象上执行-sendNext: 方法：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RACReplaySubject相当于一个自带buffer-的RACBehaviorSubject，它可以在每次有新的订阅者订阅之后发送之前的全部消息。"><span class="nav-number">5.6.3.</span> <span class="nav-text">RACReplaySubject相当于一个自带buffer 的RACBehaviorSubject，它可以在每次有新的订阅者订阅之后发送之前的全部消息。</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RACSequence-1"><span class="nav-number">5.7.</span> <span class="nav-text">RACSequence</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#高效的遍历数组和字典"><span class="nav-number">5.7.1.</span> <span class="nav-text">高效的遍历数组和字典</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RACMulticastConnection-1"><span class="nav-number">5.8.</span> <span class="nav-text">RACMulticastConnection</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#当有多个订阅者，但是我们只想发送一个信号的时候怎么办？这时我们就可以用RACMulticastConnection，来实现。代码示例如下"><span class="nav-number">5.8.1.</span> <span class="nav-text">当有多个订阅者，但是我们只想发送一个信号的时候怎么办？这时我们就可以用RACMulticastConnection，来实现。代码示例如下:</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-普通写法"><span class="nav-number">5.8.1.1.</span> <span class="nav-text">1.普通写法:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#比较好的写法"><span class="nav-number">5.8.1.2.</span> <span class="nav-text">比较好的写法:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#大概原理"><span class="nav-number">5.8.1.3.</span> <span class="nav-text">大概原理 :</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RACCommand-1"><span class="nav-number">5.8.2.</span> <span class="nav-text">RACCommand</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#RACCommand-RAC中用于处理事件的类，可以把事件如何处理，事件中的数据如何传递，包装到这个类中，他可以很方便的监控事件的执行过程，比如看事件有没有执行完毕"><span class="nav-number">5.8.2.1.</span> <span class="nav-text">RACCommand:RAC中用于处理事件的类，可以把事件如何处理，事件中的数据如何传递，包装到这个类中，他可以很方便的监控事件的执行过程，比如看事件有没有执行完毕</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用场景-监听按钮点击，网络请求"><span class="nav-number">5.8.2.2.</span> <span class="nav-text">使用场景:监听按钮点击，网络请求</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RAC常用宏-1"><span class="nav-number">5.9.</span> <span class="nav-text">RAC常用宏</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#RAC有许多强大而方便的宏。如下"><span class="nav-number">5.9.1.</span> <span class="nav-text">RAC有许多强大而方便的宏。如下:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RAC-bind-1"><span class="nav-number">5.10.</span> <span class="nav-text">RAC-bind</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RAC-过滤-1"><span class="nav-number">5.11.</span> <span class="nav-text">RAC-过滤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#有时候我们想要过滤一些信号，这时候我们便可以用RAC的过滤方法。过滤方法有好多种，如下代码，从不同情况下进行了分析。"><span class="nav-number">5.11.1.</span> <span class="nav-text">有时候我们想要过滤一些信号，这时候我们便可以用RAC的过滤方法。过滤方法有好多种，如下代码，从不同情况下进行了分析。</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RAC-映射-1"><span class="nav-number">5.12.</span> <span class="nav-text">RAC-映射</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#RAC的映射在实际开发中有什么用呢？比如我们想要拦截服务器返回的数据，给数据拼接特定的东西或想对数据进行操作从而更改返回值，类似于这样的情况下，我们便可以考虑用RAC的映射，实例代码如下"><span class="nav-number">5.12.1.</span> <span class="nav-text">RAC的映射在实际开发中有什么用呢？比如我们想要拦截服务器返回的数据，给数据拼接特定的东西或想对数据进行操作从而更改返回值，类似于这样的情况下，我们便可以考虑用RAC的映射，实例代码如下</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RAC-组合-1"><span class="nav-number">5.13.</span> <span class="nav-text">RAC-组合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#把多个信号聚合成你想要的信号-比如-当多个输入框都有值的时候按钮才可点击"><span class="nav-number">5.13.1.</span> <span class="nav-text">把多个信号聚合成你想要的信号,(比如-当多个输入框都有值的时候按钮才可点击)</span></a></li></ol></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">chuandong ding</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
